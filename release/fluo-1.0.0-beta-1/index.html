<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" integrity="sha384-h21C2fcDk/eFsW9sC9h0dhokq5pDinLNklTKoxIZRUn3+hvmgQSffLLQ4G4l2eEr" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/fluo.css">
    <link rel="canonical" href="https://fluo.apache.org//release/fluo-1.0.0-beta-1/">
    <link rel="icon" type="image/png" href="/resources/favicon.png">
    
    <title>Fluo 1.0.0-beta-1 released | Apache Fluo</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <!-- Place your <script> tags here. -->

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55360307-1', 'auto');
  ga('send', 'pageview');

</script>

<script>window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));</script>

  </head>
  <body style="padding-top: 100px">
    <nav id="fluo-nav" class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <div class="navbar-toggle-wrapper visible-xs">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".js-navbar-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
          </div>
          <a href="/" class="navbar-brand"><img id="fluo-img" height="40px" src="/resources/fluo-logo-dark.png" alt="Apache Fluo"></a>
        </div>
        <div class="collapse navbar-collapse js-navbar-collapse" style="margin-top: 20px">
          <ul class="navbar-nav nav">
            <li><a href="/release/">Releases</a></li>
            <li><a href="/tour/">Tour</a></li>
            <li><a href="/docs/">Docs</a></li>
            <li><a href="/api/">API</a></li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#">Community<span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="/getinvolved/">Get Involved</a></li>
                <li><a href="/news/">News Archive</a></li>
                <li><a href="/people/">People</a></li>
                <li><a href="/related-projects/">Related Projects</a></li>
                <li><a href="/poweredby/">Powered By</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#">Contributing<span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="/how-to-contribute/">How To Contribute</a></li>
                <li><a href="/release-process/">Release Process</a></li>
              </ul>
            </li>
          </ul>
          <ul class="navbar-nav nav navbar-right">
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#">Apache Software Foundation<span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="https://www.apache.org">Apache Homepage</a></li>
                <li><a href="https://www.apache.org/licenses/LICENSE-2.0">License</a></li>
                <li><a href="https://www.apache.org/foundation/sponsorship">Sponsorship</i></a></li>
                <li><a href="https://www.apache.org/security">Security</a></li>
                <li><a href="https://www.apache.org/foundation/thanks">Thanks</a></li>
                <li><a href="https://www.apache.org/foundation/policies/conduct">Code of Conduct</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container">
      <div class="row">
          <div class="col-sm-12">
            <div class="post-header">
  <h2>Fluo 1.0.0-beta-1 released</h2>
  <p class="text-muted">09 Jun 2015</p>
  <p><a class="twitter-share-button" href="https://twitter.com/intent/tweet?text=Fluo 1.0.0-beta-1 released&url=https://fluo.apache.org//release/fluo-1.0.0-beta-1/&via=ApacheFluo&related=ApacheFluo" rel="nofollow" target="_blank" title="Share on Twitter">Twitter</a></p>
</div>


  <div class="alert alert-danger" role="alert">This release was made before Apache incubation and is not endorsed by the ASF.</div>


<div class="post-content">
  <p>Fluo 1.0.0-beta-1 is the second official release of Fluo. Fluo is an implementation of Googleâ€™s <a href="http://research.google.com/pubs/pub36726.html">percolator paper</a>, which adds large-scale incremental 
processing of data using distributed transactions and notifications. It runs on <a href="http://hadoop.apache.org/docs/r2.5.1/hadoop-yarn/hadoop-yarn-site/YARN.html">YARN</a> and stores its data in <a href="https://accumulo.apache.org/">Accumulo</a>.</p>

<p>Below are resources for this release:</p>

<ul>
  <li>Download the <a href="https://github.com/fluo-io/fluo/releases/tag/1.0.0-beta-1">Fluo binary tarball</a> for 1.0.0-beta-1 from GitHub.</li>
  <li>View the <a href="/docs/fluo/1.0.0-beta-1/">documentation</a> for help getting started with Fluo.</li>
  <li><a href="https://javadoc.io/doc/io.fluo/fluo-api/1.0.0-beta-1/">Javadocs</a> are available for this release.</li>
  <li>A <a href="https://github.com/fluo-io/fluo/tree/1.0.0-beta-1">tag</a> of Fluo codebase for 1.0.0-beta-1 is available.</li>
  <li>Fluo <a href="http://search.maven.org/#search%7Cga%7C1%7Cfluo">jars</a> have been deployed to Maven Central.</li>
  <li>The <a href="https://github.com/fluo-io/fluo-quickstart">Quickstart</a> and <a href="https://github.com/fluo-io/phrasecount">Phrasecount</a> applications were updated to work with this release.</li>
</ul>

<p>This release closed <a href="https://github.com/fluo-io/fluo/issues?q=milestone%3A1.0.0-beta-1+is%3Aclosed">133 tickets</a>. This release is not recommended for production use.
There is no upgrade path from 1.0.0-alpha-1 to 1.0.0-beta-1.</p>

<h2 id="significant-features">Significant features</h2>

<p>This release contains many new features that makes it easier to run, develop, and monitor Fluo applications.</p>

<h4 id="simplified-fluo-administration-on-a-local-machine-or-ec2-cluster">Simplified Fluo administration on a local machine or EC2 cluster</h4>

<p>Developers can now run Fluo and its dependencies on their local machine (<a href="https://github.com/fluo-io/fluo/issues/92">#92</a>) or an AWS EC2 cluster (<a href="https://github.com/fluo-io/fluo/issues/356">#356</a>) using a few simple commands.
This was done by creating two administration tools called <a href="https://github.com/fluo-io/fluo-dev">Fluo-dev</a> and <a href="https://github.com/fluo-io/fluo-deploy">Fluo-deploy</a> whose scripts and configuration reside in repos
separate from the Fluo code base.  These tools allow developers to collaborate and share configuration for running Fluo.</p>

<h4 id="transaction-metrics-are-viewable-using-common-monitoring-tools">Transaction metrics are viewable using common monitoring tools</h4>

<p>Fluo now publishes metrics (<a href="https://github.com/fluo-io/fluo/issues/20">#20</a>) about transactions, collisions, and timestamps using <a href="https://dropwizard.github.io/metrics/3.1.0/">Dropwizard metrics</a>.  These metrics are by default published 
using JMX and are viewable using JConsole or JVisualVM.  Fluo can also be configured to publish metrics to Graphite or Ganglia.  View the <a href="https://github.com/fluo-io/fluo/blob/1.0.0-beta-1/docs/metrics.md">metrics documentation</a>
for more information.</p>

<h4 id="improved-processing-of-notifications-in-fluo-workers">Improved processing of notifications in Fluo workers</h4>

<p>Fluo workers were refactored to separate the code used for finding and executing work.  Each worker uses a single thread for finding 
work (<a href="https://github.com/fluo-io/fluo/issues/19">#19</a>).  A new method was introduced to partition work among workers using a hash+mod of notifications (<a href="https://github.com/fluo-io/fluo/issues/282">#282</a>).
The commit message for <a href="https://github.com/fluo-io/fluo/commit/4100e236b8438350e30eda924a6360e2c722ae37">4100e23</a> contains a good description of some of the benefits and drawback of the current
hashing approach.</p>

<h4 id="improved-the-deletion-of-observer-notifications">Improved the deletion of observer notifications</h4>

<p>When a cell is deleted in Accumulo, a delete marker is inserted.  Delete markers stay around until
all files in a tablet are compacted.  For Fluo this could cause a lot of notification delete markers
to build up over time.  To avoid this buildup, the way Fluo deletes notifications was changed in
(<a href="https://github.com/fluo-io/fluo/issues/457">#457</a>).  Accumulo delete markers are no longer used, Fluo now uses a custom delete marker for
notifications.  The custom deleter marker allows Fluo to do analysis when Accumulo flushes memory to
disk and avoid writing many delete markers to persistent storage.</p>

<h4 id="easier-management-of-fluo-from-the-command-line">Easier management of Fluo from the command line</h4>

<p>Fluo now provides different scripts (<strong>fluo</strong>, <strong>mini-fluo</strong>, &amp; <strong>local-fluo</strong>) for managing Fluo using a YARN cluster, MiniFluo, or local processes.  Several commands
were created for these scripts.  A <strong>scan</strong> command allows users to print a snapshot of a Fluo table (<a href="https://github.com/fluo-io/fluo/issues/319">#319</a>).  A <strong>info</strong> command shows locations of containers
when running Fluo in YARN (<a href="https://github.com/fluo-io/fluo/issues/297">#297</a>).  A <strong>classpath</strong> command gives users a list of jars needed to execute Fluo client code (<a href="https://github.com/fluo-io/fluo/issues/436">#436</a>).  A <strong>wait</strong> command will
sleep until all notifications are processed (<a href="https://github.com/fluo-io/fluo/issues/434">#434</a>).</p>

<h4 id="support-for-running-multiple-fluo-applications-on-a-single-cluster">Support for running multiple Fluo applications on a single cluster</h4>

<p>Users can now run multiple Fluo applications using a single cluster (<a href="https://github.com/fluo-io/fluo/issues/454">#454</a>).  This enables different Fluo users to share the same cluster.  Fluo applications
can be started and stopped independently.  Each application has its own configuration.</p>

<h4 id="fluo-build-improvements">Fluo build improvements</h4>

<p>On each build, all Java code is automatically formatted based on Google Java Style (<a href="https://github.com/fluo-io/fluo/issues/479">#479</a>).  Also, checkstyle and findbugs will fail the build if certain
standards are not reached (<a href="https://github.com/fluo-io/fluo/issues/185">#185</a>).  The POM is also sorted (<a href="https://github.com/fluo-io/fluo/issues/493">#493</a>).</p>

<h4 id="organized-fluo-code-base">Organized Fluo code base</h4>

<p>The Fluo stress test was moved to its own <a href="https://github.com/fluo-io/fluo-stress">repo</a> and is no longer a sub-module (<a href="https://github.com/fluo-io/fluo/issues/385">#385</a>).  MiniFluo was moved from fluo-core to the fluo-mini 
module/jar (<a href="https://github.com/fluo-io/fluo/issues/439">#439</a>).  This reduced the number of dependencies in fluo-core.  However, developers will now need to include the fluo-mini jar in their Maven
POM if they start MiniFluo.</p>

<h4 id="fluo-testing-improvements">Fluo testing improvements</h4>

<p>Integration tests can now be run from Eclipse (<a href="https://github.com/fluo-io/fluo/issues/322">#322</a>).  Several new <a href="https://github.com/fluo-io/fluo/issues?utf8=%E2%9C%93&amp;q=milestone%3A1.0.0-beta-1+is%3Aclosed+%22unit+test%22">unit tests</a> were created.</p>

<h4 id="other-important-improvements-and-bug-fixes">Other important improvements and bug fixes</h4>

<ul>
  <li><a href="https://github.com/fluo-io/fluo/issues/470">#470</a> - Replaced FluoFileOutputFormat with an Accumulo Key/Value generator</li>
  <li><a href="https://github.com/fluo-io/fluo/issues/460">#460</a> - Reduced Fluo API module dependencies</li>
  <li><a href="https://github.com/fluo-io/fluo/issues/456">#456</a> - Fixed bug with notifications being lost when processes died</li>
  <li><a href="https://github.com/fluo-io/fluo/issues/446">#446</a> - Simplified log configuration and configure rolling log files in YARN</li>
  <li><a href="https://github.com/fluo-io/fluo/issues/442">#442</a> - Reduced the number of curator clients in FluoAdmin</li>
  <li><a href="https://github.com/fluo-io/fluo/issues/383">#383</a> - Improved transaction logging to help users debug collisions. See <a href="https://github.com/fluo-io/fluo/blob/1.0.0-beta-1/docs/applications.md#debugging-applications">debugging documentation</a>.</li>
  <li><a href="https://github.com/fluo-io/fluo/issues/365">#365</a> - Analyze Fluo code to see what non-public Accumulo APIs are used</li>
  <li><a href="https://github.com/fluo-io/fluo/issues/362">#362</a> - Made API data objects immutable</li>
  <li><a href="https://github.com/fluo-io/fluo/issues/349">#349</a> - Support application level configuration in fluo.properties</li>
  <li><a href="https://github.com/fluo-io/fluo/issues/342">#342</a> - Add a configurable retry timeout to Fluo clients</li>
  <li><a href="https://github.com/fluo-io/fluo/issues/294">#294</a> - Fluo now uses chroot suffix in its Zookeeper connection.</li>
  <li><a href="https://github.com/fluo-io/fluo/issues/293">#293</a> - Add argument checking to FluoConfiguration</li>
  <li><a href="https://github.com/fluo-io/fluo/issues/244">#244</a> - Make re-initialization easier for user</li>
</ul>

<h2 id="testing">Testing</h2>

<p>A successful long stress test run was conducted using Fluo built from commit
<a href="https://github.com/fluo-io/fluo/commit/fb647dd6a470e8015654f8ed99b9196f5f49582a">fb647dd</a>.  The test ran very well and never fell behind like a
<a href="/blog/2014/12/30/stress-test-long-run/">previous long run</a> of stress did.  The test had the following
properties.</p>

<ul>
  <li>Initialized stress test using 1 billion random integers.</li>
  <li>Ran 150 incremental loads of 100 thousand integers.  Slept 3 minutes between loads.</li>
  <li>Used 19 m3.xlarge nodes on EC2.  16 workers and 3 masters</li>
  <li>Configuration for the test committed and tagged in git : <a href="https://github.com/keith-turner/fluo-deploy/tree/beta-long-test-1">fluo-deploy tag</a> and <a href="https://github.com/keith-turner/fluo-stress/tree/beta-long-test-1">fluo-stress tag</a></li>
  <li>Opened two issues as a result of test <a href="https://github.com/fluo-io/fluo/issues/499">#499</a> and <a href="https://github.com/fluo-io/fluo-stress/issues/30">fluo-stress#30</a></li>
</ul>

<p>Below is the trailing output from running the test.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>*****Generating and loading incremental data set 148*****
*****Generating and loading incremental data set 149*****
*****Generating and loading incremental data set 150*****
*****Calculating # of unique integers using MapReduce*****
                UNIQUE=1014486419
*****Wait for Fluo to finish processing*****
05:33:40.158 [main] INFO  io.fluo.cluster.runner.AppRunner - The wait command will exit when all notifications are processed
05:33:40.417 [Thread-3] INFO  io.fluo.core.oracle.OracleClient - Connected to oracle at worker4:9913
05:33:41.308 [main] INFO  io.fluo.cluster.runner.AppRunner - All processing has finished!
*****Printing # of unique integers calculated by Fluo*****
Total at root : 1014486419
Nodes Scanned : 59605
*****Verifying Fluo &amp; MapReduce results match*****
Success! Fluo &amp; MapReduce both calculated 1014486419 unique integers
</code></pre>
</div>

<p>The test ran for a little over 12 hours.  Below are two plots pulled from
graphite showing the number of notifications queued and transaction rate over
the entire test run.  Load transactions are not included in the rate.  The rate
is transactions per second.  The accuracy of these plots is uncertain because
no graphite configuration changes were made.  The plots do seem within the
ballpark.</p>

<p><img src="/resources/release/1.0.0-beta-1/queued.png" alt="Notifications Queued" title="Notifications Queued" /> <img src="/resources/release/1.0.0-beta-1/rate.png" alt="Transaction rate" title="Transaction Rate" /></p>


</div>

<div>
  <p class="text-muted">View all releases in the <a href="/release/">release archive</a></p>
</div>

          </div>
      </div>
      <hr>
      <div class="row footer">
        <div class="col-sm-12 text-center">
          <div class="center-block">
          <a href="https://apache.org"><img src="/resources/feather.png" alt="Apache"></a>
          Copyright &copy; 2017 The Apache Software Foundation. Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache&nbsp;License,&nbsp;Version&nbsp;2.0</a>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
